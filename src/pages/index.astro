---
// src/pages/index.astro
export const prerender = true

// Import global styles
import "../styles/global.css"
import Header from "../components/Header.astro"
import Hero from "../components/Hero.astro"
import About from "../components/About.astro"
import Menu from "../components/Menu.astro"
import favicon from '../assets/favicon.png';
import Gallery from "../components/Gallery.astro"
import Contact from "../components/Contact.astro"
import Barista from "../components/Barista.astro"
import Footer from "../components/Footer.astro"

const siteTitle = "Tugang Cafe - Every Cup is a Celebration of Togetherness";
const siteDescription = "Premium coffee shop in Taguig serving the finest coffee, milk tea, and delicious snacks. Experience warmth and community with every visit.";
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{siteTitle}</title>
  <meta name="description" content={siteDescription} />
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href={favicon.src} />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content={siteTitle} />
  <meta property="og:description" content={siteDescription} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://tugangcafe.com" />
  
  <!-- Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CafeOrCoffeeShop",
      "name": "Tugang Cafe",
      "description": "Every cup is a celebration of togetherness",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "PGRC Building lot 4 B2A blk 21 Camia St. Pembo",
        "addressLocality": "Taguig",
        "addressCountry": "Philippines"
      },
      "telephone": "270006233",
      "url": "https://tugang-cafe-2.jimdosite.com",
      "sameAs": [
        "https://instagram.com/tugangcafe_",
        "https://tiktok.com/@tugangcafe"
      ]
    }
  </script>
</head>

<body style="font-family: var(--font-modern);" class="text-neutral-800 bg-tugang-light">

<!-- Initial Blank Screen - Semi-transparent to show loading -->
<div id="blankScreen" class="fixed inset-0 z-[60] bg-black/50"></div>

<!-- Loading Screen -->
<div id="loadingScreen" class="fixed inset-0 z-50 bg-black flex items-center justify-center">
  <div class="text-center">
    <!-- Logo Animation -->
    <div class="mb-8">
      <div class="w-24 h-24 mx-auto mb-4 animate-bounce">
        <img src={favicon.src} alt="Tugang Cafe Logo" class="w-full h-full object-cover rounded-full border-4 border-white/30 shadow-2xl" />
      </div>
      <h1 style="font-family: var(--font-script);" class="text-4xl font-bold text-white animate-pulse">
        Tugang Cafe
      </h1>
      <p class="text-white/80 mt-2 animate-fade-in">
        Every cup is a celebration of togetherness â˜•
      </p>
    </div>
    
    <!-- Loading Animation -->
    <div class="flex justify-center space-x-2 mb-8">
      <div class="w-3 h-3 bg-white rounded-full animate-loading-dot" style="animation-delay: 0ms"></div>
      <div class="w-3 h-3 bg-white rounded-full animate-loading-dot" style="animation-delay: 150ms"></div>
      <div class="w-3 h-3 bg-white rounded-full animate-loading-dot" style="animation-delay: 300ms"></div>
    </div>
    
    <!-- Progress Bar -->
    <div class="w-64 h-1 bg-white/20 rounded-full overflow-hidden mx-auto">
      <div id="progressBar" class="h-full bg-white rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
    </div>
    
    <p class="text-white/60 text-sm mt-4 animate-pulse">
      Brewing your experience...
    </p>
  </div>
</div>

<Header/>
<Hero/>
<About/>
<Menu/>
<Gallery/>
<Barista/>
<Contact/>
<Footer/>

<style>
  /* Loading Animations */
  @keyframes loading-dot {
    0%, 80%, 100% {
      transform: scale(0.8);
      opacity: 0.5;
    }
    40% {
      transform: scale(1.2);
      opacity: 1;
    }
  }
  
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-loading-dot {
    animation: loading-dot 1.4s infinite ease-in-out;
  }
  
  .animate-fade-in {
    animation: fade-in 2s ease-out;
  }
  
  /* Both screens exit together */
  .screens-exit {
    opacity: 0;
    transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const blankScreen = document.getElementById('blankScreen');
    const loadingScreen = document.getElementById('loadingScreen');
    const progressBar = document.getElementById('progressBar');
    
    // Start loading progress immediately (both screens are visible)
    startLoadingProgress();
    
    // Loading Screen Logic - Fixed
    function startLoadingProgress() {
      let progress = 0;
      const progressInterval = setInterval(() => {
        progress += Math.random() * 15 + 5;
        if (progress >= 100) {
          progress = 100;
          clearInterval(progressInterval);
          
          // Hide both screens at the same time
          setTimeout(() => {
            if (loadingScreen && blankScreen) {
              // Both screens disappear together
              loadingScreen.classList.add('screens-exit');
              blankScreen.classList.add('screens-exit');
              
              setTimeout(() => {
                loadingScreen.style.display = 'none';
                blankScreen.style.display = 'none';
              }, 800);
            }
          }, 500);
        }
        
        if (progressBar) {
          progressBar.style.width = `${progress}%`;
        }
      }, 150);
    }

    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuBtn?.addEventListener('click', () => {
      mobileMenu?.classList.toggle('hidden');
    });

    // Menu category switching
    const menuTabs = document.querySelectorAll('.menu-tab');
    const menuCategories = document.querySelectorAll('.menu-category');
    
    menuTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const category = tab.getAttribute('data-category');
        
        // Update active tab
        menuTabs.forEach(t => {
          t.classList.remove('active', 'bg-tugang-primary', 'text-white');
          t.classList.add('bg-white', 'text-tugang-primary');
        });
        tab.classList.add('active', 'bg-tugang-primary', 'text-white');
        tab.classList.remove('bg-white', 'text-tugang-primary');
        
        // Show corresponding category
        menuCategories.forEach(cat => {
          cat.classList.add('hidden');
        });
        if (category) {
          document.getElementById(category)?.classList.remove('hidden');
        }
      });
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          // Close mobile menu if open
          mobileMenu?.classList.add('hidden');
        }
      });
    });

    // Form submission (basic handling)
    document.querySelector('form')?.addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Thank you for your message! We\'ll get back to you soon.');
      this.reset();
    });

    // Add scroll effect to navigation
    window.addEventListener('scroll', () => {
      const nav = document.querySelector('nav');
      if (window.scrollY > 50) {
        nav?.classList.add('backdrop-blur-md');
      } else {
        nav?.classList.remove('backdrop-blur-md');
      }
    });
  });
</script>
</body>
</html>